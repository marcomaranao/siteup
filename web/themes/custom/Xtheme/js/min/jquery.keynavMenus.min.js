!function(o) {
    o.fn.keyNavMenus = function(e) {
        function r(e) {
            return e.each(function() {
                e.parent("li").removeClass(t.openClass).delay(200).removeClass(t.visibleClass), 
                e.siblings(t.triggerClass).removeClass(t.triggerOpenClass).attr("aria-expanded", !1).attr("aria-label", t.triggerOpenLabel), 
                e.siblings(".menu").slideUp().find("> a").focus();
            });
        }
        var t = o.extend({
            open: 40,
            close: 38,
            next: 39,
            prev: 37,
            click: [ 32, 13 ],
            openClass: "is-open",
            visibleClass: "is-visible",
            triggerClass: ".submenu-trigger",
            triggerOpenClass: "is-open",
            triggerOpenLabel: "Expand this section of the menu",
            triggerClosedLabel: "Collapse this section of the menu",
            addClass: !0,
            autoNavigate: !1,
            tabClose: !0
        }, e);
        return this.each(function() {
            var n = o(this);
            n.bind("keydown", function(e) {
                var s, a, i, l = e.which;
                -1 == o.inArray(l, t.open) && l !== t.open || (e.preventDefault(), (s = n).each(function() {
                    s.parent("li").addClass(t.visibleClass).delay(200).addClass(t.openClass), s.siblings(t.triggerClass).addClass(t.triggerOpenClass).attr("aria-expanded", !0).attr("aria-label", t.triggerClosedLabel), 
                    s.siblings(".menu").slideDown().find(" > li:first-child > a").focus();
                })), -1 == o.inArray(l, t.close) && l !== t.close || (e.preventDefault(), r(n)), 
                -1 == o.inArray(l, t.next) && l !== t.next || (e.preventDefault(), (a = n).each(function() {
                    a.closest("li").next().children("a").focus();
                })), -1 == o.inArray(l, t.prev) && l !== t.prev || (e.preventDefault(), (i = n).each(function() {
                    0 < i.closest("li").prev("li").length ? i.closest("li").prev().children("a").focus() : (i.closest("ul").closest("li").removeClass(t.openClass).delay(200).removeClass(t.visibleClass).find("> a").focus(), 
                    i.closest("ul").closest("li").find("> a").siblings(t.triggerClass).removeClass(t.triggerOpenClass).attr("aria-expanded", !1).attr("aria-label", t.triggerOpenLabel));
                })), -1 == o.inArray(l, t.click) && l !== t.click || (e.preventDefault(), n.each(function() {
                    this.click();
                })), e.shiftKey && 9 === e.which && t.tabClose && r(n);
            });
        });
    };
}(jQuery);